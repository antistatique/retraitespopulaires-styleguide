{% extends "@retraitespopulaires/node/node.html.twig" %}

{# If there's a calculator it must be on full width #}
{% if node.field_url_logismata is not empty %}
  {% set node_content_width = [ 'col-xs-12' ] %}
{% endif %}

{% block node_body %}
  {{ parent() }}
  {% if node.field_url_logismata is not empty %}
      {{ bamboo_render_block('rp_quickwin_calculator_block', { 'node': node }) }}
  {% endif %}
{% endblock %}

{% block node_bottom %}
  {% embed "@retraitespopulaires/node/partials/attached_documents.html.twig" with {'documents': node.field_document_page} %}{% endembed %}

  {% embed "@retraitespopulaires/node/partials/attached_files.html.twig" with {'files': node.field_file_page} %}{% endembed %}

  {% if node.field_document_page is not empty or node.field_file_page is not empty %}
    <div class="spacer spacer-md"></div>
  {% endif %}
{% endblock %}

{% block node_bottom_outer %}
  <!-- Form -->
  {% if content.field_form is not empty and content.field_form['#field_type'] == 'webform' %}
    <div class="background-overflow bg-berrylight-gray">
      <div class="bg-special-waves"></div>
      <div class="spacer"></div>
      <div class="row">
        <div class="{{ node_content_width|join(' ')|default('col-xs-12 col-lg-10 col-lg-offset-1 col-xl-8 col-xl-offset-2') }}">
          <div class="card card-white">
            <div class="card-body">
              {{ content.field_form }}
            </div>
          </div>
        </div>
      </div>
    </div>
  {% endif %}

  {{ bamboo_render_block('rp_site_products_block') }}
{% endblock %}

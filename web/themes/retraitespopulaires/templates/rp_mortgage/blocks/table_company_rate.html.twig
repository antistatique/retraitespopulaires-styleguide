{#
 Variables:
  - variables.type: (string)
  - variables.headers: (array of string)
  - variables.rates: (array of Rate)
  - variables.date: (DateTime)
#}

{% if variables.rates %}
  {% set formatted_date = variables.date|date_format('F Y') %}

  {% set variables_rates = [variables.rates|first] %}
  {% if variables_rates %}
  <table class="table table-wide tablesaw tablesaw-stack table-hypotheque" data-tablesaw-mode="stack" id="table-{{ variable.type|clean_id }}-variables">
    <caption>{% trans %}Taux de {{ formatted_date }}{% endtrans %}</caption>
    <thead>
      <tr>
        <th>Taux d'intérêt variable</th>
        <th>Taux</th>
      </tr>
    </thead>

    <tbody>
      {% for rate in variables_rates %}
      <tr>
        <td>{{ rate.getName() }}</td>
        <td>{{ rate.firstRate ? rate.firstRate|format_pourcent : '' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endif %}

  {% set fixes_rates = variables.rates|slice(2) %}
  {% if variables_rates %}
  <table class="table table-wide tablesaw tablesaw-stack table-hypotheque" data-tablesaw-mode="stack" id="table-{{ variable.type|clean_id }}-fixe">
    <caption>{% trans %}Taux de {{ formatted_date }}{% endtrans %}</caption>
    <thead>
      <tr>
        <th>Taux d'intérêt fixe, durée</th>
        <th>Taux</th>
      </tr>
    </thead>

    <tbody>
      {% for rate in fixes_rates %}
        {% if rate.firstRate %}
        <tr>
          <td>{{ rate.getName() }}</td>
          <td>{{ rate.firstRate ? rate.firstRate|format_pourcent : '' }}</td>
        </tr>
        {% endif %}
      {% endfor %}
    </tbody>
  </table>
  {% endif %}

{% endif %}

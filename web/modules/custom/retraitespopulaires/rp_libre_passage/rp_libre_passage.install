<?php

use Drupal\node\Entity\Node;

/**
 * Migrate old settings to node template whisperer field
 */
function rp_libre_passage_update_8001(&$sandbox) {
  $state = \Drupal::state();

  $config_names = [
    'rp_libre_passage.settings.page.calculator',
  ];

  foreach ($config_names as $config_name){
    $settings = $state->get($config_name);

    $node = Node::load($settings['nid']);
    if (isset($node)) {
      $node->set('field_template_whisperer', $settings['theme']);
      $node->save();
    }
  }
}

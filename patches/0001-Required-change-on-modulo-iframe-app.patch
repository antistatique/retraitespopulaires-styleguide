From c72dc4336d3882a5105d3ac1e8514f29e896c5dc Mon Sep 17 00:00:00 2001
From: Gilles Doge <gilles@antistatique.net>
Date: Wed, 10 Jan 2018 10:20:46 +0100
Subject: [PATCH] Required change on modulo iframe app

---
 .../app/src/model/runtime-environment-application-parameters.js     | 4 ++--
 web/rpopulaires/index.html                                          | 2 +-
 web/rpopulaires/src/iframe-communication.js                         | 6 +++---
 3 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/web/rpopulaires/app/src/model/runtime-environment-application-parameters.js b/web/rpopulaires/app/src/model/runtime-environment-application-parameters.js
index 15ae7d2..424aecb 100755
--- a/web/rpopulaires/app/src/model/runtime-environment-application-parameters.js
+++ b/web/rpopulaires/app/src/model/runtime-environment-application-parameters.js
@@ -13,8 +13,8 @@ define('runtime-environment-application-parameters', [], function() {
     "contactCustomizationUrl": "",
     "requirePaths": {},
     "authorizedContainers": [
-        "http://rp.dev",
-        "http://www.retraitespopulaires.ch",
+        "http://rp.localhost",
+        "https://www.retraitespopulaires.ch",
         "https://wwweti.retraitespopulaires.ch"
     ]
 };
diff --git a/web/rpopulaires/index.html b/web/rpopulaires/index.html
index e49ef41..689ea79 100755
--- a/web/rpopulaires/index.html
+++ b/web/rpopulaires/index.html
@@ -18,7 +18,7 @@
            It is also important to set the width to 768px, so the correct bootstrap rules apply.
       -->
       <iframe id="calculationFrame" style="overflow: hidden; border: 1px dashed blue; padding: 0px; margin: 0px" width="100%" height="1800px" scrolling="no" seamless=""
-name="calculationFrame" src="https://uat.logismata.ch/rpopulaires/app/"
+name="calculationFrame" src="/rpopulaires/app/index.html"
       ></iframe>
       <script src="/rpopulaires/src/iframe-communication.js"></script>
    </div>
diff --git a/web/rpopulaires/src/iframe-communication.js b/web/rpopulaires/src/iframe-communication.js
index 867bbbd..db806f6 100755
--- a/web/rpopulaires/src/iframe-communication.js
+++ b/web/rpopulaires/src/iframe-communication.js
@@ -1,4 +1,4 @@
-var authorizedOrigins = ["https://uat.logismata.ch"];
+var authorizedOrigins = ["https://wwweti.retraitespopulaires.ch", "https://www.retraitespopulaires.ch", "http://rp.localhost"];
 var sendOnIFrameScrollMessage = true;
 
 var iFrameMessageProcessor = {
@@ -16,7 +16,7 @@ var iFrameMessageProcessor = {
    },
 
    onDocumentTitleChanged: function(parameters) {
-      document.title = parameters;
+      // document.title = parameters;
    },
 
    onViewTitleChanged: function(parameters) {
@@ -27,7 +27,7 @@ var iFrameMessageProcessor = {
    },
 
    openContactUrl: function(parameters) {
-      console.log("received from openContactUrl %O", parameters);
+      window.location = '/contact/conseil-clients-prives';
    }
 };
 
-- 
2.6.3

